| Phase  | Bereich / Squad                      | Auftrag (kurz)                               | Tech-Stack (muss)                                                                                                                                                                                                                                                                                            | Security & Compliance                                                                                                                                                                              | Deliverables = „Work done“                                                                                                                                                                       |
| ------ | ------------------------------------ | -------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **A1** | **Platform & Delivery (Kubernetes)** | Cluster & GitOps-Basis bereitstellen         | **AKS** (oder on-prem K8s), **Argo CD** (App-of-Apps), **Ingress** (NGINX oder Traefik), **cert-manager** (+ ClusterIssuer), **Container Registry** (ACR/GHCR), **StorageClass** (Premium SSD), **DNS**/**Azure Front Door**/**WAF** (optional), **Cluster Autoscaler/Karpenter (Azure Provider)**, **KEDA** | **OIDC/Workload Identity** aktiv, **NetworkPolicies** (Default-Deny), **Pod Security** (Baseline/Restricted), **ImagePull-Secrets** via ESO, **TLS** (Let’s Encrypt), Admin-RBAC (Least Privilege) | • AKS live, kubeconfig verteilt • Argo CD synchronisiert „Basis-Apps“ • Ingress + TLS grün • Node-/GPU-Pools definiert • Runbook + SLOs vorhanden                                                |
| **A2** | **Security & Compliance**            | Policies & Secrets etablieren                | **OPA/Gatekeeper** (Constraints), **External Secrets Operator (ESO)**, **Azure Key Vault** (on-prem optional: **HashiCorp Vault**), **Gitleaks**, **Cosign** (Image-Sign), **Trivy/Grype**, **SBOM** (Syft), **Entra ID/Keycloak** (SSO/RBAC)                                                                | **Least-Privilege** (SPNs), **Secret-Rotation**, **No-Plaintext-Secrets in CI**, **Signed Commits/Images**, **DPIA/EU-AI-Act-Checkliste**, **Audit-Trails**                                        | • SecretStore zu Key Vault live • Gatekeeper-Policies aktiv (no \:latest, Ressourcengrenzen, erlaubte Registries) • Supply-Chain-Gate im CI verankert • Security-Runbooks (Leak/Rotate/Forensik) |
| **A3** | **Observability & FinOps**           | Sichtbarkeit + Kostenkontrolle               | **OpenTelemetry Collector**, **Prometheus→Thanos**, **Grafana**, **Loki/Promtail**, **Tempo/Jaeger**, **Alertmanager**, **Azure Monitor/Log Analytics** (optional), **Cost-Tags**, **Kosten-Ledger** (später in Data-&-Retrieval)                                                                            | **PII-Redaktion** in Logs, **Retention** je Signalart, **Least-Access** für Dashboards, **SIEM-Anschluss** (Defender/Sentinel o. ä.)                                                               | • Dashboards (SLOs, Kapazität, Fehlerklassen) • Alerts (P1–P3) • Standard-Labels/Annotations (env, tenant, app, version, cost-center) • FinOps-Übersicht pro Tenant                              |
| **B1** | **Project-Factory & Team-Directory** | Tenants & Projekte „per Knopf“               | **Automations** (Argo App-Templates), **YAML-Schablonen** (Namespace/Quota/LimitRange/NetPol), **ADO Project/Repo/Pipeline Bootstraps**                                                                                                                                                                      | **RBAC** pro Tenant, **Quota**/LimitRange enforced, **Policy-Checks**                                                                                                                              | • „Neuer Tenant < 30 Min“ • Team-YAML → CODEOWNERS/ADO-Gruppen • Basispipeline in neuem Repo                                                                                                     |
| **B2** | **Control-Plane (n8n)**              | Event-Ingress, Approvals, Benachrichtigungen | **n8n Queue-Mode** (Main/Webhook/Worker), **Redis** (Queue/Rate), **Teams/Slack/Email** Connectors, **Service Hooks** von ADO                                                                                                                                                                                | **SSO/RBAC**, **Rate-Limits**, **Approval-Pfad** auditierbar                                                                                                                                       | • Webhook-URLs im ADO registriert • Standard-Flows: Ingest→Validate→Route→Notify • Retry/Backoff-Policy                                                                                          |
| **B3** | **Agent-Gateway (MCP-Hub)**          | Einheitlicher Anschluss für Agenten/KIs      | **Gateway/API** (Fastify/Express/Kong), **MCP-Bridge** (inkl. ADO-MCP), **Quota/Rate**, **Audit DB (Postgres)**                                                                                                                                                                                              | **OIDC**, **mTLS**, **Per-Tenant-Quotas**, **Scopes**                                                                                                                                              | • OpenAPI + Auth getestet • Audit-Events in PG • Load/Failover Tests                                                                                                                             |
| **C1** | **Orchestrator & Workflows**         | Sub-Workflows, Retries, Idempotenz           | **Temporal** (oder **Azure Durable Functions**), **RabbitMQ/Kafka/Redis Streams** (Jobs/Events), **Idempotency Keys**, **DLQ**, **Saga/Compensation**                                                                                                                                                        | **RBAC** je Workflow, **Policy-Checks** vor Tool-Calls, **Audit-Spans** (OTel)                                                                                                                     | • E2E „Ticket→Draft-PR“ Workflow • Retry/DLQ bewiesen • Backpressure-Szenarien getestet                                                                                                          |
| **C2** | **Adapters & Repo-Ops**              | SCM/ADO bedienen                             | **ADO REST/GraphQL**, **Git CLI/LibGit2**, **Branch/Diff/PR**, **Labels/CODEOWNERS**, **Service Connections**                                                                                                                                                                                                | **Token-Scopes minimal**, **429 Backoff + Jitter**, **Idempotente Writes**                                                                                                                         | • „Create Draft-PR“ API • PR-Labels/Status-Checks • Rate-Limit-Robustheit                                                                                                                        |
| **C3** | **Pipeline-Factory & Runners**       | CI/CD standardisieren                        | **YAML-Templates**, **ADO Pipelines**, **Container Runner-Pools**, **Policy-Checks** (Conftest), **Cache/Artifacts**, **ACR**                                                                                                                                                                                | **No-Secrets im YAML**, **Signed Bases**, **Provenance**                                                                                                                                           | • Pipeline-Vorlagen publiziert • „Green by default“ bei Neu-Repos • Policy-Gates aktiv                                                                                                           |
| **D1** | **Data & Retrieval**                 | Daten/Knowledge bereitstellen                | **PostgreSQL-HA**, **Redis Cluster**, **MinIO/S3**, **Vector-DB** (pgvector/Qdrant/Weaviate), **Indexer**, **MLflow**, **Kosten-Ledger**                                                                                                                                                                     | **TDE/RBAC**, **Object-Lock/Versioning**, **Access-Controls** in Vector-DB, **Retention**                                                                                                          | • RAG-Index Pfad live • MLflow Registry nutzbar • Kosten-Ledger schreibt pro Task                                                                                                                |
| **D2** | **LLM Platform & Router**            | Modelle sicher & günstig routen              | **Model-Router** (OpenAI-Compat), **vLLM/TGI** (GPU-Pools, KV-Cache), **Cloud-LLMs** (Azure/OpenAI/Anthropic/Google), **Guardrails** (PII-Redaktion, Moderation), **KEDA** für Serving                                                                                                                       | **mTLS**, **Per-Tenant Budgets/Quotas**, **Data Boundary Flags**, **Canary Routing**                                                                                                               | • Router Policies (Cost/Latenz) • Self-hosted + Cloud angebunden • Canary-Rollout + Auto-Rollback                                                                                                |
| **D3** | **Docs-Generator**                   | Automatische Doku                            | **FastAPI/Node** + **Jinja/Handlebars**, **Repo-Bots** für README/ADR/Changelog                                                                                                                                                                                                                              | **Sign-off**, **License-Check**                                                                                                                                                                    | • PRs mit Doku-Updates • Changelog automatisch                                                                                                                                                   |
| **E1** | **Admin-Console & Enablement**       | Self-Service & Übersicht                     | **Next.js/React**, **OpenAPI-Clients**, **RBAC/SSO**, **Scorecards**                                                                                                                                                                                                                                         | **Least-Privilege**, **Audit-UI**                                                                                                                                                                  | • Projekt/Tenant-Übersicht • Budgets & SLOs im UI                                                                                                                                                |
